<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Personal Blog Of Gufran | Lets Take A Look At Laravel 5">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google-site-verification" content="jVNul_ZvsOPuGmV4Y85HMquZOpo8z0nH4ViodkMePpY">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="twitter:site" content="@freatbeater">
        <meta name="twitter:creator" content="@freatbeater">
        <meta property="og:type" content="article">
        <meta property="og:title" content="Blag Of A Programmer">
        <meta name="generator" content="Hodor">
        <link rel="canonical" href="http://www.gufran.me" />

        <title>Lets Take A Look At Laravel 5</title>

        <link rel="stylesheet" href="/css/build/style.201410072054.css">

        <script>
          (function(d) {
            var config = {
              kitId: 'mnk2fni',
              scriptTimeout: 3000
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script>
    </head>
    <body>
        <header id="mobile-header" class="visible-xs">
            <a id="home" href="http://www.gufran.me">
                <i class="icon-home"></i> Home
            </a>
            <label for="menu-button-check" class="nav-menu-button">
                <span></span>
                <span class="mid"></span>
                <span></span>
            </label>
        </header>
        <input type="checkbox" id="menu-button-check" class="hidden">
        <header id="main-header">
            <ul id="nav">
                <li class=" hidden-xs">
                    <a href="http://www.gufran.me">
                        <i class="icon-home"></i> Home
                    </a>
                </li>
                <li class="">
                    <a href="/tags/">
                        <i class="icon-tags"></i> Tags
                    </a>
                </li>
                <li>
                    <a href="#" class="contact-link" id="contact-section" target="_blank">
                        <i class="icon-mail"></i> Contact
                    </a>
                </li>
                <li>
                    <a href="http://github.com/Gufran" target="_blank">
                        <i class="icon-github"></i> Github
                    </a>
                </li>
                <li>
                    <a href="http://twitter.com/freatbeater" target="_blank">
                        <i class="icon-twitter"></i> Twitter
                    </a>
                </li>
            </ul>
        </header>
        <div id="main-contents">
<div class="single-post">
    <div class="container">
        <div class="post-item" itemscope itemtype="http://schema.org/BlogPosting" role="article">
            <div class="post-header">
                <div class="blog-no-header"></div>
            </div>
            <div class="post-body">
                <div class="meta">
                    <i class="icon-date"></i> 
                    <time itemprop="datePublished" datetime="04 September 2014" class="date">
                        04 September 2014
                    </time>
                </div>
                <h2 class="title" itemprop="name">Lets Take A Look At Laravel 5</h2>
                <div class="content" itemprop="description">
                    <p>Laravel <del>4.3</del> 5 is still due official release but you can already check it out at Github and install using composer by running</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">composer create-project laravel/laravel Laravel5 dev-develop
</code></pre></div>
<p>Let&#39;s check out what new in this shiny new release.</p>

<h3>Contracts</h3>

<p>I&#39;ll start with all those new contracts now built into separate package, with those contracts abstracted out of the foundation there is a lot of things you can do with them. For each laravel package there are now contracts available that you can implement and bind into IoC container to alter the functionality of the application - Just like that. No <em>&#39;I wish this class could do that&#39;</em> thing anymore.<br>
Now for an example, there is exception handler contract <code>Illuminate\Contracts\Exception\Handler</code> which defines the way the exceptions will be handled by the application. I went ahead and wrote my own exception handler:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">namespace</span> <span class="nx">App\Library\Exception</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\Exception\Handler</span> <span class="k">as</span> <span class="nx">ExceptionHandlerContract</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExceptionHandler</span> <span class="k">implements</span> <span class="nx">ExceptionHandlerContract</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$handlers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">error</span><span class="p">(</span><span class="nx">Closure</span> <span class="nv">$callback</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">array_unshift</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">handlers</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">pushError</span><span class="p">(</span><span class="nx">Closere</span> <span class="nv">$callback</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">handlers</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$callback</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">handleException</span><span class="p">(</span><span class="nx">Exception</span> <span class="nv">$exception</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;There was an error, But I ate it.&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The last thing you&#39;d want from your application is to spit out a stack trace in production, This little Dog of exception handlers is perfect for those times. Let&#39;s register it now. Open up the <code>app/Providers/ErrorServiceProvider.php</code> file and inside <code>register()</code> method put this binding:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;Illuminate\Contracts\Exception\Handler&#39;</span><span class="p">,</span> <span class="s1">&#39;App\Library\Exception\ExceptionHandler&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Cool, now you can sleep better at night.</p>

<p>There are contracts for every core package and you can implement them as required by your application, so go ahead and feel free to mix and match.</p>

<h3>IoC Container</h3>

<p>IoC container has received a touch-up too, and honestly, this is my favourite feature of all time.</p>

<p>You write classes all the time, they have dependencies and you let IoC container inject those dependencies into the object, then you create service providers to instantiate objects and that is all to it.<br>
But what a shame it is at times when you are injecting a dependency into constructor and this particular dependency is only used by a single method which itself is not used frequently! Isn&#39;t that a shame ? Arn&#39;t you guilt ? Say it out loud! Don&#39;t you feel that guilt creeping onto yourself when you lie there on your bed at night ? Say it louder!<br>
Yes, that is the feeling you get when you sin. But thankfully, not anymore.</p>

<p>IoC container now has the ability to inject dependencies into methods and closures. There are two new methods available at container namely <code>Wrap</code> and <code>Call</code>. Here is how you can use them.</p>

<p>Method <code>Call</code>, as the name suggests, can call a <em>callable</em> while injecting proper dependencies into it. Consider this as an example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Dependency</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDescription</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;this is a dependency&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Operational</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">runOperation</span><span class="p">(</span><span class="nx">Dependency</span> <span class="nv">$dep</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;Description of dependency: &#39;</span> <span class="o">.</span> <span class="nv">$dep</span><span class="o">-&gt;</span><span class="na">getDescription</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$operational</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Operational</span><span class="p">();</span>

<span class="k">echo</span> <span class="nx">App</span><span class="o">::</span><span class="na">call</span><span class="p">([</span><span class="nv">$operational</span><span class="p">,</span> <span class="s1">&#39;runOperation&#39;</span><span class="p">]);</span>
<span class="c1">// Guess what ?</span>
</code></pre></div>
<p>Wasn&#39;t that a little too easy ? What happened here is that the <code>runOperation</code> method was called on <code>$operational</code> object with an object of class <code>Dependency</code> injected into it. And tell you what? that is not all to it.<br>
You can also specify an array of arguments for dependency injection as a second argument to <code>call</code> method and those will be injected into the method as well. I know that sounds tricky but that is not, look at this for example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Dependency</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDescription</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;This is same as above, isn&#39;t it ?&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Operational</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">runOperation</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">Dependency</span> <span class="nv">$dep</span><span class="p">,</span> <span class="nv">$occupation</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;Name: &#39;</span> 
             <span class="o">.</span> <span class="nv">$name</span> 
             <span class="o">.</span> <span class="s1">&#39;, Age: &#39;</span> 
             <span class="o">.</span> <span class="nv">$age</span> 
             <span class="o">.</span> <span class="s1">&#39;, Occupation: &#39;</span> 
             <span class="o">.</span> <span class="nv">$occupation</span> 
             <span class="o">.</span> <span class="s1">&#39; Desc: &#39;</span> 
             <span class="o">.</span> <span class="nv">$dep</span><span class="o">-&gt;</span><span class="na">getDescription</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$operational</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Operational</span><span class="p">();</span>

<span class="k">echo</span> <span class="nx">App</span><span class="o">::</span><span class="na">call</span><span class="p">([</span><span class="nv">$operational</span><span class="p">,</span> <span class="s1">&#39;runOperation&#39;</span><span class="p">],</span> <span class="p">[</span>
               <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Gufran&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;23&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;occupation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Drinking coffee&#39;</span>
<span class="p">]);</span>
</code></pre></div>
<p>What you are expecting from these codes is correct (unless you think this will whank).<br>
So, a quick recap, The call method will call any <code>callable</code> while injecting proper dependencies into it, whats more is that you can specify the dependencies as second argument to call method and it will automatically determine which one goes in where. Doesn&#39;t matter the order of elements in array.</p>

<p>The <code>warp</code> method is similar to <code>call</code> but <code>wrap</code> takes a closure as first argument and an array of arguments as second argument, it will then then wrap the given closure such that it&#39;s dependencies will be injected when executed. Here is an example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$callEvent</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nx">Dependency</span> <span class="nv">$depOne</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">Operational</span> <span class="nv">$depTwo</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$name</span> <span class="o">.</span> <span class="nv">$depOne</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">()</span> <span class="o">.</span> <span class="nv">$age</span> <span class="o">.</span> <span class="nv">$depTwo</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>This closure has <code>Dependency</code> class and <code>Operational</code> class as its dependency, we can call it directly using <code>App::call()</code> method and that will work just fine but we want to prepare the closure for execution and execute it at a later time, that is when you call <code>wrap</code>:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$callableEvent</span> <span class="o">=</span> <span class="nx">App</span><span class="o">::</span><span class="na">wrap</span><span class="p">(</span><span class="nv">$callEvent</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Gufran&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">23</span><span class="p">]);</span>
</code></pre></div>
<p>Now you can pass around the <code>$callableEvent</code> to other methods and call it when you want, this will work as expected.</p>

<h3>Support Package</h3>

<p>Last time when <a href="http://www.gufran.me/post/laravel-illuminate-support-package-introduction">I wrote about the support package</a> all those cool little helpers functions were available in <code>helpers.php</code> file. They still are but how they function internally now is a little different.<br>
All the array helper functions are moved to a dedicated class <code>Illuminate\Support\Arr</code>, so now you can access <code>Arr::dot()</code>, <code>Arr::build()</code>, <code>Arr::divide()</code> etc. of <code>Arr</code> facade</p>

<p>So, This is all for now, people. More Laravel 4.3 related posts will appear here soon so keep an eye out for them.</p>

                </div> 
            </div>
            <div class="post-tags">
                <i class="icon-tags"></i>
                
                <a class="tag_list_link" href="/tag/IoC Component">IoC Component</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Laravel">Laravel</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Laravel 4.3">Laravel 4.3</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Module">Module</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Tips">Tips</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Trick">Trick</a>
                <span class="seperator">|</span>
                
            </div>
            <ul class="post-socials">
                <li><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.gufran.me/post/lets-take-a-look-at-laravel-4-3&t=Lets Take A Look At Laravel 5" target="_blank"><i class="icon-facebook"></i></a></li>
                <li><a href="https://twitter.com/intent/tweet?original_referer=http://www.gufran.me/post/lets-take-a-look-at-laravel-4-3&text=Lets Take A Look At Laravel 5&url=http://www.gufran.me/post/lets-take-a-look-at-laravel-4-3" target="_blank"><i class="icon-twitter"></i></a></li>
                <li><a href="https://plus.google.com/share?url=http://www.gufran.me/post/lets-take-a-look-at-laravel-4-3" target="_blank"><i class="icon-google-plus"></i></a></li>
            </ul>
            <div id="disqus_thread" itemprop="comment"></div>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript>
        </div>
    </div>
    <div id="blog-pagination">
        <ul>
        	 
            <li class="prev"><a href="http://www.gufran.me/post/handle-form-data-and-validation"><i class="icon-arrow-left"></i><span>Prev</span></a></li>
            
             
            <li class="separator"></li>
            
            
        </ul>
    </div>
</div>
<script>
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//gufran-me.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
 </div>
       <footer>
        <div class="author">
          <div class="container">
            <div class="row" itemscope itemprop="author" itemtype="http://schema.org/Person">
              <div class="col-md-4 col-sm-3 hidden-xs">
                <img class="avatar" itemprop="image" src="http://www.gravatar.com/avatar/61a886b6d8b8e349a0ad8624992bc716?s=500" alt="Gufran">
              </div>
              <div class="col-md-8 col-sm-9">
                <p><em>Hi, there!</em> My name is <span itemprop="name">Mohammad Gufran</span>.</p>
                <p itemprop="description">I am a <span itemprop="jobTitle">programmer</span> who create things for web. Most of my time is spent in front of my computer browsing the web and writing codes for next cool project. I am a lifelong learner.<br/>You can contact me using email or send me a tweet.</p>
                <div class="row" role="contentinfo">
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://github.com/Gufran" target="_blank">
                      <i class="icon-github"></i> github
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://twitter.com/freatbeater" target="_blank">
                      <i class="icon-twitter"></i> twitter
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://plus.google.com/+GufranKhan24" target="_blank">
                      <i class="icon-google-plus"></i> google+
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link contact-link" href="#" target="_blank">
                      <i class="icon-mail"></i> contact
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="bottom">
            <div class="container">
                <div id="copyright">All content, unless specified otherwise,  is available under <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Common License with Attribution and Share Alike</a></div>
            </div>
        </div>   
       </footer> 
       <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
       <script type="text/javascript" src="/js/custom.201410072054.js"></script>   
    </body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-46671921-1', 'gufran.me');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
</html>