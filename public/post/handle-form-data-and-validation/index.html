<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Personal Blog Of Gufran | Handle Form Data And Validation">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google-site-verification" content="jVNul_ZvsOPuGmV4Y85HMquZOpo8z0nH4ViodkMePpY">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="twitter:site" content="@freatbeater">
        <meta name="twitter:creator" content="@freatbeater">
        <meta property="og:type" content="article">
        <meta property="og:title" content="Blag Of A Programmer">
        <meta name="generator" content="Hodor">
        <link rel="canonical" href="http://www.gufran.me" />

        <title>Handle Form Data And Validation</title>

        <script src="//use.typekit.net/mnk2fni.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
        
        <link rel="stylesheet" href="/css/build/style.201504192329.css">

    </head>
    <body>
        <header id="mobile-header" class="visible-xs">
            <a id="home" href="http://www.gufran.me">
                <i class="icon-home"></i> Home
            </a>
            <label for="menu-button-check" class="nav-menu-button">
                <span></span>
                <span class="mid"></span>
                <span></span>
            </label>
        </header>
        <input type="checkbox" id="menu-button-check" class="hidden">
        <header id="main-header">
            <ul id="nav">
                <li class=" hidden-xs">
                    <a href="http://www.gufran.me">
                        <i class="icon-home"></i> Home
                    </a>
                </li>
                <li class="">
                    <a href="/tags/">
                        <i class="icon-tags"></i> Tags
                    </a>
                </li>
                <li>
                    <a href="#" class="contact-link" id="contact-section" target="_blank">
                        <i class="icon-mail"></i> Contact
                    </a>
                </li>
                <li>
                    <a href="http://github.com/Gufran" target="_blank">
                        <i class="icon-github"></i> Github
                    </a>
                </li>
                <li>
                    <a href="http://twitter.com/freatbeater" target="_blank">
                        <i class="icon-twitter"></i> Twitter
                    </a>
                </li>
            </ul>
        </header>
        <div id="main-contents">
<div class="single-post">
    <div class="container">
        <div class="post-item" itemscope itemtype="http://schema.org/BlogPosting" role="article">
            <div class="post-header">
                <div class="blog-no-header"></div>
            </div>
            <div class="post-body">
                <div class="meta">
                    <i class="icon-date"></i> 
                    <time itemprop="datePublished" datetime="02 August 2014" class="date">
                        02 August 2014
                    </time>
                </div>
                <h2 class="title" itemprop="name">Handle Form Data And Validation</h2>
                <div class="content" itemprop="description">
                    <p>A frequently asked question among developers is <em>&quot;Where should I put validation logic ?&quot;</em>, and My not so popular answer to the question is <em>&quot;Put it in the form.&quot;</em><br>
And without getting into any debate about it let me introduce you to my <a href="https://github.com/Gufran/former">new package <em>Former</em></a>, which I extracted out of a project I am working on.</p>

<p>Before you can do anything with it you need to install the package in your project. If you haven&#39;t already then go ahead and run <code>composer require gufran/former *</code>.  </p>

<p>Now, all you need to do is to create a class which represents a form and set validation rules on it. This class will extend <code>Gufran\Former\GenericForm</code> and should implement an abstract method <code>getRules()</code> which will return an array of rules. Here is an example for a <code>SignupForm</code>.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">namespace</span> <span class="nx">Acme\Forms</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Gufran\Former\GenericForm</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SignupForm</span> <span class="k">extends</span> <span class="nx">GenericForm</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getRules</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;first_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
            <span class="s1">&#39;last_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
            <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|email&#39;</span><span class="p">,</span>
            <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|min:8|max:32|confirmed&#39;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now you are ready to inject this form into any class. In a controller for example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">use</span> <span class="nx">Acme\Forms\SignupForm</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AccountController</span> <span class="k">extends</span> <span class="nx">BaseController</span> <span class="p">{</span>

    <span class="k">private</span> <span class="nv">$form</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Let Laravel inject the SignupForm into controller</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">SignupForm</span> <span class="nv">$form</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span> <span class="o">=</span> <span class="nv">$form</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// check if form is valid</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="c1">// save the form into database</span>
            <span class="nx">User</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span><span class="o">-&gt;</span><span class="na">getValues</span><span class="p">());</span>
            <span class="k">return</span> <span class="nx">Redirect</span><span class="o">::</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;confirm_signup&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">// If form is not valid then get all error messages and notify user</span>
            <span class="k">return</span> <span class="nx">Redirect</span><span class="o">::</span><span class="na">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">withErrors</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span><span class="o">-&gt;</span><span class="na">messages</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>And that is it.<br>
Yeah, really! The form retrieve the data from <code>Request</code> and run a validation against rules defined in <code>getRules</code> method. You don&#39;t need to worry about the values because only the values for elements defined in rules will be fetched, in this case <code>first_name</code>, <code>last_name</code>, <code>email</code>, <code>password</code>. And if there is any confirmation field like <code>password_confirmation</code> it will fetch that too. <code>getValues()</code> method will filter the confirmation fields so you don&#39;t need to worry about saving the data directly to model as well.</p>

<p>There are several methods available to a <code>GenericForm</code> object:</p>

<ul>
<li><code>validates()</code>: This is the function which determines whether or not the form is valid.</li>
<li><code>isValid()</code>: This is an alias for <code>validates()</code>, use whichever makes more sense.</li>
<li><code>isInvalid()</code>: As the name suggests, this will check if the form is invalid.</li>
<li><code>getValues()</code>: Get values from form as an array. Only those values which have a corresponding rule will be returned.</li>
<li><code>get( string )</code>: Get a value by its name.</li>
</ul>

<p>Furthermore, the <code>GenericForm</code> implements <code>IteratorAggregate</code> interface so you can also iterate over the object as if it was an array, take this for an example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// Iterate over the form to process each element</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span> <span class="k">as</span> <span class="nv">$element</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$safeInput</span><span class="p">[</span><span class="nv">$element</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Crypt</span><span class="o">::</span><span class="na">encrypt</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><code>ArrayAccess</code> interface is also implemented by <code>GenericForm</code> that enables you to use the object like an array, for example:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// Get the value of first_name and last_name</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">];</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">];</span>
</code></pre></div>
<p>So that&#39;s it folks, I hope you can use this tiny little package in your projects. Leave your appreciation and comments below and if you find any problem then please open an issue over <a href="https://github.com/Gufran/former">Github repository</a>.</p>

                </div> 
            </div>
            <div class="post-tags">
                <i class="icon-tags"></i>
                
                <a class="tag_list_link" href="/tag/Concept">Concept</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Laravel">Laravel</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Package">Package</a>
                <span class="seperator">|</span>
                
                <a class="tag_list_link" href="/tag/Tips">Tips</a>
                <span class="seperator">|</span>
                
            </div>
            <ul class="post-socials">
                <li><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.gufran.me/post/handle-form-data-and-validation&t=Handle Form Data And Validation" target="_blank"><i class="icon-facebook"></i></a></li>
                <li><a href="https://twitter.com/intent/tweet?original_referer=http://www.gufran.me/post/handle-form-data-and-validation&text=Handle Form Data And Validation&url=http://www.gufran.me/post/handle-form-data-and-validation" target="_blank"><i class="icon-twitter"></i></a></li>
                <li><a href="https://plus.google.com/share?url=http://www.gufran.me/post/handle-form-data-and-validation" target="_blank"><i class="icon-google-plus"></i></a></li>
            </ul>
            <div id="disqus_thread" itemprop="comment"></div>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript>
        </div>
    </div>
    <div id="blog-pagination">
        <ul>
        	 
            <li class="prev"><a href="http://www.gufran.me/post/local-dns-server-with-vagrant-homestead"><i class="icon-arrow-left"></i><span>Prev</span></a></li>
            
             
            <li class="separator"></li>
            
             
            <li class="next"><a href="http://www.gufran.me/post/lets-take-a-look-at-laravel-4-3"><span>Next</span><i class="icon-arrow-right"></i></a></li>
            
        </ul>
    </div>
</div>
<script>
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//gufran-me.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
 </div>
       <footer>
        <div class="author">
          <div class="container">
            <div class="row" itemscope itemprop="author" itemtype="http://schema.org/Person">
              <div class="col-md-4 col-sm-3 hidden-xs">
                <img class="avatar" itemprop="image" src="http://www.gravatar.com/avatar/61a886b6d8b8e349a0ad8624992bc716?s=500" alt="Gufran">
              </div>
              <div class="col-md-8 col-sm-9">
                <p><em>Hi, there!</em> My name is <span itemprop="name">Mohammad Gufran</span>.</p>
                <p itemprop="description">I am a <span itemprop="jobTitle">programmer</span> who create things for web. Most of my time is spent in front of my computer browsing the web and writing codes for next cool project. I am a lifelong learner.<br/>You can contact me using email or send me a tweet.</p>
                <div class="row" role="contentinfo">
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://github.com/Gufran" target="_blank">
                      <i class="icon-github"></i> github
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://twitter.com/freatbeater" target="_blank">
                      <i class="icon-twitter"></i> twitter
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link" rel="author" href="http://plus.google.com/+GufranKhan24" target="_blank">
                      <i class="icon-google-plus"></i> google+
                    </a>
                  </div>
                  <div class="col-md-3 col-sm-3 social-button">
                    <a class="author-link contact-link" href="#" target="_blank">
                      <i class="icon-mail"></i> contact
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="bottom">
            <div class="container">
                <div id="copyright">All content, unless specified otherwise,  is available under <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Common License with Attribution and Share Alike</a></div>
            </div>
        </div>   
       </footer> 
       <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
       <script type="text/javascript" src="/js/custom.201504192329.js"></script>   
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-46671921-1', 'gufran.me');
        ga('require', 'displayfeatures');
        ga('send', 'pageview');
      </script>
    </body>
</html>